<html>
    <head>
        <title>threejs demo</title>
        <style>
            canvas{
                width: 100%;
                height: 100%
            }
            body{
                padding: 0;
                margin: 0;
            }
            input{
                position: absolute;
                bottom: 10px;
                left: 10px;
            }
        </style>
    </head>
    <body onkeydown="add_ball();">
        <script src="//cdnjs.cloudflare.com/ajax/libs/three.js/r68/three.min.js"></script>
        <script>
            var SCENE_WIDTH = window.innerWidth,
                SCENE_HEIGHT = window.innerHeight;

            var CAM_ANGLE = 90,
                CAM_ASPECT = SCENE_WIDTH / SCENE_HEIGHT,
                CAM_NEAR = 0.01,
                CAM_FAR = 10000;

            var scene = new THREE.Scene();
            var camera = new THREE.PerspectiveCamera(CAM_ANGLE, CAM_ASPECT, CAM_NEAR, CAM_FAR);

            var renderer = new THREE.WebGLRenderer();
            renderer.setSize(SCENE_WIDTH, SCENE_HEIGHT);
            document.body.appendChild(renderer.domElement);

            var geometry = new THREE.SphereGeometry(100,100,100);
            var material = new THREE.MeshLambertMaterial({color: 0xffffff});
            var cube = new THREE.Mesh(geometry, material);
            cube.position.x = -200;
            // scene.add(cube);

            camera.position.z = 3;

            // create the sphere's material
            var sphereMaterial = new THREE.MeshLambertMaterial(
            {
                color: 0xFFFFFF
            });

            // set up the sphere vars
            var radius = 50, segments = 16, rings = 16;

            // create a new mesh with sphere geometry -
            // we will cover the sphereMaterial next!
            var sphere = new THREE.Mesh(
               new THREE.SphereGeometry(radius, segments, rings),
               sphereMaterial);

            // add the sphere to the scene
            scene.add(sphere);

            // create a point light
            var pointLight = new THREE.PointLight( 0xFF0000 );

            // set its position
            pointLight.position.x = 0;
            pointLight.position.y = 0;
            pointLight.position.z = 0;

            var pointLight2 = new THREE.PointLight( 0x0000FF );

            // set its position
            pointLight2.position.x = 180;
            pointLight2.position.y = 180;
            pointLight2.position.z = 180;

            // add to the scene
            scene.add(pointLight);
            scene.add(pointLight2);

            var light_x_dir = false,
                light_y_dir = false,
                light_z_dir = false,
                spehere_x_dir = false,
                spehere_y_dir = false,
                spehere_z_dir = false,
                cube_pos_x = false,
                cube_pos_y = false,
                cube_pos_z = false;

            var cam_motion = {
                x : {
                    min : 1,
                    max : 1,
                    inc : 0,
                    init: 1
                },
                y : {
                    min : 1,
                    max : 1,
                    inc : 0,
                    init: 1
                },
                z : {
                    min : 100,
                    max : 499,
                    inc : 0,
                    init: 300
                }
            };

            var cube_motion = {
                x : {
                    min : -200,
                    max : 200,
                    inc : 1,
                    init: 0
                },
                y : {
                    min : -200,
                    max : 200,
                    inc : 1,
                    init: 0
                },
                z : {
                    min : -200,
                    max : 200,
                    inc : 1,
                    init: -199
                }
            };

            camera.position.x = cam_motion.x.init;
            camera.position.y = cam_motion.y.init;
            camera.position.z = cam_motion.z.init;

            cube.position.x = cube_motion.x.init;
            cube.position.y = cube_motion.y.init;
            cube.position.z = cube_motion.z.init;

            balls = [];

            var add_ball = function(radius, segment, rings, color, position, motion){

                if(typeof radius === 'undefined')
                    radius = getRandomInt(10, 40);
                if(typeof segment === 'undefined')
                    segment = getRandomInt(10, 40);
                if(typeof rings === 'undefined')
                    rings = getRandomInt(10, 40);

                if(typeof color === 'undefined')
                    color = 0xffffff;

                if(typeof position === 'undefined')
                    position = {
                        x : getRandomInt(0, 50),
                        y : getRandomInt(0, 50),
                        z : getRandomInt(0, 50),
                    };

                if(typeof motion === 'undefined')
                    motion = {
                        x : {
                            /*min : getRandomInt(-200, -100),
                            max : getRandomInt(100, 200),*/
                            inc : getRandomInt(1, 1) / 100,
                            point: position.x,
                            radius: radius,
                            calc: function(pos){
                                this.point += this.inc;
                                c = Math.cos(this.point);
                                pos += radius * c;
                                return pos;
                            }
                        },
                        y : {
                            /*min : getRandomInt(-200, -100),
                            max : getRandomInt(100, 200),*/
                            inc : getRandomInt(1, 1) / 100,
                            radius: radius,
                            point: position.y,
                            calc: function(pos){
                                this.point += this.inc;
                                c = Math.sin(this.point);
                                return (radius * c) + pos;
                            }
                        },
                        z : {
                            min : getRandomInt(-200, -100),
                            max : getRandomInt(100, 200),
                            inc : getRandomInt(1, 1) / 100,
                            radius: radius,
                            point: position.z,
                            calc: function(pos){
                                this.point += this.inc;
                                c = Math.cos(this.point);
                                return (radius * c) + pos;
                            }
                        }
                    };

                var geometry = new THREE.SphereGeometry(radius,segment,rings);
                var material = new THREE.MeshLambertMaterial({color: color});
                var geo_ball = new THREE.Mesh(geometry, material);
                geo_ball.position.x = position.x;
                geo_ball.position.y = position.y;
                geo_ball.position.z = position.z;

                var ball = {
                    obj : geo_ball,
                    motion : motion,
                    radius : radius
                };

                balls.push(ball);
                
                scene.add(balls[balls.length -1].obj);
            }

            function getRandomInt(min, max) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }



            var render = function () {
                for(var i in cam_motion){
                    if(camera.position[i] <= cam_motion[i].min || camera.position[i] >= cam_motion[i].max)
                        cam_motion[i].inc = 0 - cam_motion[i].inc;

                    camera.position[i] += cam_motion[i].inc;
                }

                // for(var i in cube_motion){
                //     if(cube.position[i] <= cube_motion[i].min || cube.position[i] >= cube_motion[i].max)
                //         cube_motion[i].inc = 0 - cube_motion[i].inc;

                //     cube.position[i] += cube_motion[i].inc;
                // }

                if(balls.length){
                    for(var h = 0; h < balls.length; h++){
                        ball = balls[h];

                        for(var i in ball.motion){
                            /*if(ball.obj.position[i] <= ball.motion[i].min || ball.obj.position[i] >= ball.motion[i].max)
                                ball.motion[i].inc = 0 - ball.motion[i].inc;*/

                            //ball.obj.position[i] += ball.motion[i].inc;
                            ball.obj.position[i] = ball.motion[i].calc(ball.obj.position[i]);
                        }
                    }
                }

                requestAnimationFrame(render);

                if(pointLight.position.x == 360 || pointLight.position.x == 0)
                    light_x_dir = !light_x_dir;
                if(pointLight.position.y == 360 || pointLight.position.y == 0)
                    light_y_dir = !light_y_dir;
                if(pointLight.position.z == 360 || pointLight.position.z == 0)
                    light_z_dir = !light_z_dir;

                if(light_x_dir)
                    pointLight.position.x += 1;
                else
                    pointLight.position.x -= 1;

                if(light_y_dir)
                    pointLight.position.y += 1;
                else
                    pointLight.position.y -= 1;

                if(light_z_dir)
                    pointLight2.position.z += 1;
                else
                    pointLight2.position.z -= 1;

                if(light_x_dir)
                    pointLight2.position.x -= 1;
                else
                    pointLight2.position.x += 1;

                if(light_y_dir)
                    pointLight2.position.y -= 1;
                else
                    pointLight2.position.y += 1;

                if(light_z_dir)
                    pointLight2.position.z -= 1;
                else
                    pointLight2.position.z += 1;


                renderer.render(scene, camera);
            };

            render();
        </script>
        <!-- <input type="button" value="+" onclick="add_ball();"> -->
    </body>
</html>